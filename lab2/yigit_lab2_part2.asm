ORG 0h

;MOV PCON,#00H

START:
MOV TMOD,#20H
CLR A
CLR C
MOV SCON,#50H
MOV TH1, #243D
MOV TL1, #243D
SETB TR1
CLR RI
;WAIT0: JNB RI, WAIT0

;MOV A,SBUF
;AGAIN: CLR RI


WAIT0: JNB RI, WAIT0

MOV A, SBUF
CJNE A,#30H, CARRY_CHECK1
SJMP START
CARRY_CHECK2: CJNE A,#39H, CARRY_CHECK3

SJMP ADJUSTMENT
CARRY_CHECK1: JC START

SJMP CARRY_CHECK2
CARRY_CHECK3: JNC START






ADJUSTMENT:
ANL A, #0FH
MOV R3,A
MOV TMOD,#21H
C5: ;523Hz 1912us
MOV R5,#130D
MOV R4,#2D
LOOP111: MOV R4,#2D
LOOP11: MOV R5, #130D
LOOP1:
SETB P1.0
MOV TL0,#44H
MOV TH0,#0FCH
SETB TR0
WAIT1: JNB TF0,WAIT1
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#44H
MOV TH0,#0FCH
SETB TR0
WAIT2: JNB TF0,WAIT2
CLR TR0
CLR TF0

DJNZ R5, LOOP1
DJNZ R4, LOOP11
DJNZ R3, LOOP111

D5: ;587Hz 1703
MOV R3,A
MOV R5,#138D
MOV R4,#2D
LOOP222: MOV R4,#2D
LOOP22: MOV R5, #138D
LOOP2: 
SETB P1.0
MOV TL0,#0ADH
MOV TH0,#0FCH
SETB TR0
WAIT3: JNB TF0,WAIT3
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#0ADH
MOV TH0,#0FCH
SETB TR0
WAIT4: JNB TF0,WAIT4
CLR TR0
CLR TF0
DJNZ R5, LOOP2
DJNZ R4, LOOP22
DJNZ R3, LOOP222

E5: ;659Hz 1517
MOV R3,A
MOV R5,#164D
MOV R4,#2D
LOOP333: MOV R4,#2D
LOOP33: MOV R5, #164D
LOOP3: 
SETB P1.0
MOV TL0,#0AH
MOV TH0,#0FDH
SETB TR0
WAIT5: JNB TF0,WAIT5
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#0AH
MOV TH0,#0FDH
SETB TR0
WAIT6: JNB TF0,WAIT6
CLR TR0
CLR TF0
DJNZ R5, LOOP3
DJNZ R4, LOOP33
DJNZ R3, LOOP333

F5: ;698Hz 1433
MOV R3,A
MOV R5,#169D
MOV R4,#2D
LOOP444: MOV R4,#2D
LOOP44: MOV R5, #169D
LOOP4: 
SETB P1.0
MOV TL0,#34H
MOV TH0,#0FDH
SETB TR0
WAIT7: JNB TF0,WAIT7
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#34H
MOV TH0,#0FDH
SETB TR0
WAIT8: JNB TF0,WAIT8
CLR TR0
CLR TF0
DJNZ R5, LOOP4
DJNZ R4, LOOP44
DJNZ R3, LOOP444

G5: ;784Hz 1275
MOV R3,A
MOV R5,#196D
MOV R4,#2D
LOOP555: MOV R4,#2D
LOOP55: MOV R5, #196D
LOOP5: 
SETB P1.0
MOV TL0,#83H
MOV TH0,#0FDH
SETB TR0
WAIT9: JNB TF0,WAIT9
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#83H
MOV TH0,#0FDH
SETB TR0
WAIT10: JNB TF0,WAIT10
CLR TR0
CLR TF0
DJNZ R5, LOOP5
DJNZ R4, LOOP55
DJNZ R3, LOOP555

A5: ;880Hz 1136
MOV R3,A
MOV R5,#220D
MOV R4,#2D
LOOP666: MOV R4,#2D
LOOP66: MOV R5, #220D
LOOP6: 
SETB P1.0
MOV TL0,#0C8H
MOV TH0,#0FDH
SETB TR0
WAIT11: JNB TF0,WAIT11
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#0C8H
MOV TH0,#0FDH
SETB TR0
WAIT12: JNB TF0,WAIT12
CLR TR0
CLR TF0
DJNZ R5, LOOP6
DJNZ R4, LOOP66
DJNZ R3, LOOP666

B5: ;987.77Hz 1012
MOV R3,A
MOV R5,#247D
MOV R4,#2D
LOOP777: MOV R4,#2D
LOOP77: MOV R5, #247D
LOOP7: 
SETB P1.0
MOV TL0,#06H
MOV TH0,#0FEH
SETB TR0
WAIT13: JNB TF0,WAIT13
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#06H
MOV TH0,#0FEH
SETB TR0
WAIT14: JNB TF0,WAIT14
CLR TR0
CLR TF0
DJNZ R5, LOOP7
DJNZ R4, LOOP77
DJNZ R3, LOOP777

C6: ;1046Hz 955
MOV R3,A
MOV R5,#174D
MOV R4,#3D
LOOP888: MOV R4,#3D
LOOP88: MOV R5, #174D
LOOP8: 
SETB P1.0
MOV TL0,#23H
MOV TH0,#0FEH
SETB TR0
WAIT15: JNB TF0,WAIT15
CLR TR0
CLR TF0
CLR P1.0
MOV TL0,#23H
MOV TH0,#0FEH
SETB TR0
WAIT16: JNB TF0,WAIT16
CLR TR0
CLR TF0
DJNZ R5, LOOP8
DJNZ R4, LOOP88
DJNZ R3, LOOP888

LJMP START

END





